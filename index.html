<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            
        </style>
    </head>

    <body>
        <h1>Moin Besucher:in.</h1>
        <h2>no stress!</h2>
        <canvas></canvas>
        <script>
const canvas = document.querySelector('canvas');
const c = canvas.getContext('2d');

canvas.width = 1024;
canvas.height = 576;
const gravity = 0.3;

class Sprite{
	constructor({position, velocity}){
		this.position = position;
		this.velocity = velocity;
		this.height = 120;
		this.width = 50;
		this.lastKey;
		
	}
	draw(){
		c.fillStyle = 'red';
		c.fillRect(this.position.x, this.position.y, this.width, this.height);
	}
	update(){
		this.draw();
		
		this.position.y += this.velocity.y;
		this.position.x += this.velocity.x;
		
		if (this.position.y + this.height + this.velocity.y > canvas.height){
			this.velocity.y = 0;
		} else{
			this.velocity.y += gravity;
		}
	}
}

const player = new Sprite({
	position: {
		x: 25, 
		y: 100
	},
	velocity: {
		x: 0,
		y: 0
	}
});

const enemy = new Sprite({
	position: {
		x: 875,
		y: 100
	},
	velocity: {
		x: 0,
		y: 0
	}
});
const keys = {
	a: {
		pressed: false
	},
	d: {
		pressed: false
	},
	w: {
		pressed: false
	},
	s: {
		pressed: false
	},
	ArrowUp: {
		pressed: false
	},
	ArrowLeft: {
		pressed: false
	},
	ArrowDown: {
		pressed: false
	},
	ArrowRight: {
		pressed: false
	}
}

	
function animate(){
	window.requestAnimationFrame(animate);
	c.fillStyle = 'black';
	c.fillRect(0, 0, canvas.width, canvas.height);
	player.update();
	enemy.update()
	
	player.velocity.x = 0;
	if (keys.a.pressed && player.lastKey === 'a'){
		player.velocity.x = -1;
	} else if (keys.d.pressed && player.lastKey === 'd') {
		player.velocity.x = 2;
	}

}
animate();

window.addEventListener('keydown', (event) => {
	//console.log(event.key);
	switch (event.key) {
		case 'd':
			keys.d.pressed = true;
			player.lastKey = 'd';
			break;
		case 'a':
			keys.a.pressed = true;
			player.lastKey = 'a';
			break;
		case 'w':
			player.velocity.y = -10;
			break;
		case 's':
			keys.s.pressed = true;
			player.lastKey = 's';
			break;
			
		case 'ArrowRight':
			keys.ArrowRight.pressed = true;
			enemy.lastKey = 'ArrowRight';
			break;
		case 'ArrowLeft':
			keys.ArrowLeft.pressed = true;
			enemy.lastKey = 'ArrowLeft';
			break;
		case 'ArrowUp':
			enemy.velocity.y = -10;
			break;
		case 'ArrowDown':
			keys.ArrowDown.pressed = true;
			enemy.lastKey = 'ArrowDown';
			break;
	}
	console.log(event);
});
window.addEventListener('keyup',(event) => {
	switch (event.key) {
		case 'd': 
			keys.d.pressed = false;
			break;
		case 'a':
			keys.a.pressed = false;
			break;
		case 'w':
			keys.w.pressed = false;
			break;
		case 's':
			keys.s.pressed = false;
			break;
			
		case 'ArrowRight': 
			keys.d.pressed = false;
			break;
		case 'ArrowLeft':
			keys.a.pressed = false;
			break;
		case 'ArrowUp':
			keys.w.pressed = false;
			break;
		case 'ArrowDown':
			keys.s.pressed = false;
			break;
	}
});

/**TO-DO 
*Project Setup: {
			- folders
			- background
}
Create Player and Enemy{
			- sprites
			- position
			- velocity
			- gravity
}
move chars via Event Listeners{
			- 
}
Attacks {
			- 
}
Healthbar Interface{
			- 
}
Game Timer and Game Over{
			- 
}
*/</script>
        <div class="container">
            <h3>background color: <span class="color">#f1f5f8</span></h3>
            <button class="btn btn-hero" id="btn">click me</button>
        </div>
        <script>
            const hex = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, "A", "B", "C", "D", "E", "F"];
            const btn = document.getElementById('btn');
            const color = document.querySelector('.color');
            btn.addEventListener('click', function (){
                let hexcolor = '#';
                for ( let i = 0; i<6; i++){
                    hexcolor += hex[getRandomArryItem(hex.length)];
                    color.textContent = hexcolor;
                    document.body.style.backgroundColor = hexcolor
                }
                });

            getRandomArryItem = (arrayLength) => {
            return Math.floor(Math.random() * arrayLength);
            }
        </script>
    </body>
</html>
